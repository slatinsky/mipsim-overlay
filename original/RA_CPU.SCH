// MIPSim-Schaltungsdefinition:
// Prozessor lt. Hennessy/Patterson, ohne Forwarding und Hazard Detection

// IF Stufe
IMEM IMEM,1     (750,-2770) (1280,-2770) 
INC4 ADDER,1    (900,-1990) (1100,-1990)
C4   CONST,1,4  (750,-2190) (800,-2190)
PC   COLATCH,1  (340,-2770) (500,-2770)
II1  LATCH,2    (1370,-1990) (1530,-1990)
II2  LATCH,2    (1370,-2770) (1530,-2770) (1450,-1220)
PPC  PIPE		(340,-1220) (500,-4425)
PFD  PIPE		(1370,-1220) (1530,-4425)

// ID Stufe
REG  REGFILE,2  (2530,-2675) (3190,-2675)
SIG  SIGEXT,2   (2940,-3580) (3140,-3580)
MAIN MAINCNTL,2 (2400,-1300) (2750,-1300)
MUC1 MUX,2,11   (3160,-1380) (3310,-1380)
C0A  CONST,2    (3000,-1445) (3060,-1445)
IE1  LATCH,3,11 (3560,-1380) (3720,-1380)
IE2  LATCH,3    (3560,-1990) (3720,-1990)
IE3  LATCH,3    (3560,-2490) (3720,-2490)
IE4  LATCH,3    (3560,-2893) (3720,-2890)
//IE5  LATCH,3    (3560,-3240) (3720,-3240)
IE6  LATCH,3    (3560,-3580) (3720,-3580)
IE7  LATCH,3,5  (3560,-4020) (3720,-4020)
IE8  LATCH,3,5  (3560,-4165) (3720,-4165)
PDE  PIPE		(3560,-1220) (3720,-4425)

//EX Stufe
ADDO ADDER,3    (4470,-1830) (4660,-1830)
//MUXA MUX,3    (4312,-2460) (4470,-2460)
MUXB MUX,3      (4310,-3050) (4460,-3050)
MURD MUX,3,5    (3910,-4100) (4060,-4100)
ALU  ALU,3      (4640,-2770) (4920,-2770)
MUC2 MUX,3,11   (5060,-1455) (5210,-1455)
C0B  CONST,3    (4900,-1525) (4970,-1525)
//ALUC ALUCNTL,3  (4500,-3768) (4750,-3768)
EM1  LATCH,4,11 (5280,-1455) (5440,-1455)
EM2  LATCH,4    (5280,-1830) (5440,-1830)
EM3  LATCH,4,1  (5280,-2110) (5440,-2110)
EM4  LATCH,4    (5280,-2770) (5440,-2770)
EM5  LATCH,4    (5280,-3425) (5440,-3425)
EM6  LATCH,4,5  (5280,-4100) (5440,-4100)
PEM  PIPE		(5280,-1220) (5440,-4425)

// MEM Stufe
BMUX MUX,1      (6060,-860) (6210,-860)
BAND AND,4      (5750,-2050) (5875,-2050)
DMEM DMEM,4     (5840,-2770) (6375,-2770)
MW1  LATCH,5,11 (6600,-1455) (6750,-1455)
MW2  LATCH,5    (6600,-2770) (6750,-2770)
MW3  LATCH,5    (6600,-3330) (6750,-3330)
MW4  LATCH,5,5  (6600,-4100) (6750,-4100)

// WB Stufe
MUXM MUX,5      (7100,-2845) (7250,-2845)
PMW  PIPE		(6600,-1220) (6750,-4425)


*CONNECTS*


// IF Stufe
IMEM   0,II2,0
INC4   0,II1,0 
INC4   0,BMUX,1,0,200	(1230,-1990) (1230,-785)
PC     0,IMEM,0
PC     0,INC4,0,0,200	(625,-2770) (625,-1795)
C4     0,INC4,1

// ID Stufe
II1    0,IE2,0
II2    0,MAIN,0   (1840,-2770) (1840,-1300)
II2    0,REG,3,21 (1840,-2346)
II2    0,REG,2,16 (1840,-2565) 
II2    0,SIG,0    (1840,-2770) (1840,-3580)
II2    0,IE7,0,16 (1840,-3580) (1840,-4020)
II2    0,IE8,0,11 (1840,-4020) (1840,-4165)
C0A    0,MUC1,0
REG    1,IE3,0
REG    0,IE4,0
SIG    0,IE6,0
MAIN   0,MUC1,1
MUC1   0,IE1,0 

//EX Stufe
IE1    0,MUC2,1
IE1    0,ALU,2,7	(4777,-1380)
IE1    0,MUXB,2,1 	(4390,-1380)
IE1    0,MURD,2 	(3985,-1380) 
IE2    0,ADDO,0 	(3875,-1990) (3875,-1640)
IE3    0,ALU,0
IE4    0,EM5,0  	(3875,-2890) (3875,-3425)
IE4    0,MUXB,1		(3875,-2975)
IE6    0,MUXB,0		(4190,-3580) (4190,-3130)
IE6    0,ADDO,1 	(4190,-3130) (4190,-2025)
IE7    0,MURD,1
IE8    0,MURD,0
MURD   0,EM6,0
ADDO   0,EM2,0
MUXB   0,ALU,1
ALU    0,EM4,0
ALU    1,EM3,0		(5090,-2675)	(5090,-2110)
MUC2   0,EM1,0
C0B    0,MUC2,0


//MEM Stufe			  
EM1    0,MW1,0    (6375,-1455)
EM1    0,DMEM,3,3 (6110,-1455)
//EM1    0,BMUX,2,6 (5515,-1455) (5515,-550) (6140,-550)
EM1    0,DMEM,4,2 (6530,-1455) (6530,-3240) (6110,-3240)   
EM2    0,BMUX,0   (5590,-1830) (5590, -940) 
EM3    0,BAND,0
EM1    0,BAND,1,4 (5680,-1455) (5680,-1985)
BAND   0,BMUX,2   (6000,-2050) (6000, -550) (6135,-550)

BAND   0,MUC2,2   (6000, -855) (5140, -855)
BAND   0,MUC1,2   (5140, -855) (3225, -855)
BAND   0,II2,2    (3225, -855) (1450, -855)

EM4    0,DMEM,2   (5590,-2770) (5590,-2680)
EM4    0,DMEM,1,  (5590,-2770) (5590,-2855)
EM4    0,MW3,0    (5590,-2855) (5590,-3330)
EM5    0,DMEM,0	  (5750,-3425) (5750,-3035)
EM6    0,MW4,0

//WB Stufe    
DMEM   0,MW2,0
MW1    0,MUXM,2,5		(7165,-1455)
MW1    0,REG,4,6,160	(7165,-1455) (7165,-425) (2860,-425) 
MW2    0,MUXM,1
MW3    0,MUXM,0			(7000,-3330) (7000,-2910)
MW4	   0,REG,1,0,220	(7000,-4100) (7000,-4800) (2060,-4800) (2060,-2785)
MUXM   0,REG,0,0,260	(7310,-2845) (7310,-4530) (2450,-4530) (2450,-3005)
BMUX   0,PC,0,0,300		(6375,-860) (6375,-280) (220,-280) (220,-2770)

			  



  

